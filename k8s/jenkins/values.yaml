controller:
  image:
    repository: "jenkins/jenkins"
    tag: "lts"

  admin:
    username: "admin"
    password: "admin123"

  # Expose via NodePort for Minikube access
  serviceType: NodePort
  nodePort: 32000

  # ─── CRITICAL: Enable the agent TCP listener (port 50000) ───
  agentListenerEnabled: true
  agentListenerPort: 50000

  # ─── Pre-install ONLY the essential plugins ───
  installPlugins:
    - kubernetes
    - workflow-aggregator
    - git
    - pipeline-stage-view

  # ─── JCasC: auto-configure Kubernetes Cloud on startup ───
  JCasC:
    defaultConfig: true
    configScripts:
      kubernetes-cloud: |
        jenkins:
          systemMessage: "Welcome to CodeArena Jenkins!"
          clouds:
            - kubernetes:
                name: "kubernetes"
                serverUrl: "https://kubernetes.default.svc"
                skipTlsVerify: true
                namespace: "jenkins"
                jenkinsUrl: "http://jenkins.jenkins.svc.cluster.local:8080"
                jenkinsTunnel: "jenkins-agent.jenkins.svc.cluster.local:50000"
                connectTimeout: 5
                readTimeout: 15
                containerCapStr: "10"
                maxRequestsPerHostStr: "32"

  # Kubernetes Agent Configuration
  agent:
    enabled: true
    podName: "default"
    containerName: "jnlp"

persistence:
  enabled: true
  size: 8Gi
